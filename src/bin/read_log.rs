use kraft::storage::persistent_state::ReadWritePersistentState;
use std::fs::File;

use clap::Parser;

#[derive(Parser, Debug)]
#[clap(author = "Aalekh Patel", version, about = "Read log file generated by this implementaion of Raft.", long_about = None)]
pub struct Args {
    /// The path to the log file.
    pub log_file: String,
}

pub fn main() -> Result<(), Box<dyn std::error::Error>> {
    let args = Args::parse();
    let mut file = File::open(args.log_file)?;
    let state = file
        .read_persistent_state()
        .expect("Could not read persistent state");
    println!("{:?}", state);
    Ok(())
}
